# Sockets

Для подключения проще всего использовать библиотеку [phoenix](https://www.npmjs.com/package/phoenix). Пример исползования библиотеки можно найти [здесь](assets/js/user_socket.js).

Подключение к сокету по пути `/api/socket`.

При подключении нужно указать текущий API токен. Название топика формируется как `chat:${cv_id}:${vacancy_id}`.

Перед подключением нужно создать чат с помощью `/api/chats/send_message`, иначе подключение будет неудачным.

Сервер принимает всего один тип ивентов: `new_message`. Схема запроса аналогична `POST /chats/send_message`.

При создании нового сообщения сервер отправлять `new_message` клиенту. Схема ответа аналогична `POST /chats/send_message`.
